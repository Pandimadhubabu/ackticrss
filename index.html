<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"><meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <link rel="icon" type="image/png" href="favicon/invert.png">
    <script src="https://acktic.github.io/rss.js"></script>
  </head>
<style>
@media screen and (min-width: 960px) {

    .wrapper {
	transform: translate(50%,50%);
	border: 1px solid #ddd;
	position: fixed;
	border: none;
	height: 86%;
	bottom: 60%;
	width: 50%;
	right: 50%;
	top: -36%;
    }

    ::-webkit-scrollbar { width: 5px }

    .invert::-webkit-scrollbar-thumb {background-color: #ddd }

    .invert::-webkit-scrollbar { background-color: #f5f5f5 }

    .invert {
	scrollbar-color: #ddd #f5f5f5;
	scrollbar-width: thin;
    }

    .default::-webkit-scrollbar-thumb { background-color: #0a0a0a }

    .default::-webkit-scrollbar { background-color: #000 }

    .default {
	scrollbar-color: #222 #000;
	scrollbar-width: thin;
    }

}

    div { font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif }

    html, body, .container, .output {
	overflow: hidden;
	height: 100%;
	right: 0em;
	left: 0em;
	top: 0em;
    }
    .arm {
	transform: translate(50%,50%);
	position: absolute;
	height: 50%;
	right: 50%;
	top: 0;
    }
    #inv {
	-moz-box-shadow: 1p 1px 5px #ccc;
	box-shadow: 1px 1px 5px #ccc;
    }
    .ico {
	transform: translateX(-50%);
	position: absolute;
	text-align: center;
	bottom: 0em;
	left: 50%;
    }
    .fav {
	border-radius: 24px;
	position: relative;
	cursor: pointer;
	height: 32px;
	margin: 2em;
	width: 32px;
	bottom: -2em;
    }
    .attach {
	justify-content: center;
	position: absolute;
	display: flex;
	height: 3em;
	width: 100%;
	z-index: 1;
	right: 0px;
	top: -.1em;
    }
    .category:hover { color: #ccc !important }
    .category {
	display: inline-block;
	text-align: center;
	padding-top: 2.2em;
	cursor: pointer;
	font-size: 8px;
	height: 3.6em;
	width: 14%;
	z-index: 2;
    }
    .output {
	-ms-overflow-style: -ms-autohiding-scrollbar;
	-webkit-overflow-scrolling: touch;
	outline: none !important;
	-ms-overflow-style: none;
	position: absolute;
	overflow-x: hidden;
	padding-right: 7%;
	padding-left: 7%;
	overflow: auto;
	height: 100%;
    }
    .pop:hover, .air:hover, .pub:hover { text-decoration: underline }
    #pop, #air { padding-top: 1em }
    hr { opacity: .2 }
    .pop, .air {
	font-size: 10px;
	cursor: pointer;
	padding: 3em;
    }
    #pub {
	margin-right: 1.5em;
	margin-bottom: 3em;
	margin-right: auto;
	cursor: pointer;
	display: table;
	width: 100%;
    }
    .pub {
	text-transform: capitalize;
	letter-spacing: 1px;
	margin-bottom: 3px;
	font-family: Arial;
	font-weight: bold;
	font-size: 16px;
    }
    .img { padding-bottom: 1.5em }
    .box {
	background-color: #fafafa;
	padding-bottom: 1em;
	padding-right: 1em;
	padding-left: 1em;
	padding-top: 1em;
	margin-left: -1%;
	display: table;
	height: 100%;

    }
    .ago {
	padding-bottom: 1em;
	margin-top: -5px;
	font-size: 10px;
    }
    .yt {
	-webkit-overflow-scrolling: touch;
	padding-bottom: 54.25%;
	position: relative;
	width: 100%;
	height: 0;
    }
    iframe {
	position: absolute;
	border: none;
	height: 110%;
	width: 109%;
	left: -4.5%;
	top: 0;
    }
    .random, .opposite {
	border-bottom: 1px solid rgba(0,0,0,.2);
	padding-top: 2em;
	position: fixed;
	height: 24px;
	width: 24px;
	bottom: 0em;
	z-index: 2;
    }
    .random {
	padding-left: 3em;
	right: 0em;
    }
    .opposite {
	padding-right: 3em;
	left: 0em;
    }
    .gif {
	-webkit-animation: grow 1.7s infinite ease;
	-moz-animation: grow 1.7s infinite ease
	height: 200px;
	width: 200px;
    }
    @-webkit-keyframes spin {
	100% {-webkit-transform: rotate(360deg);}   
	0%  {-webkit-transform: rotate(0deg);}
    }
    @-moz-keyframes spin {
	100% {-moz-transform: rotate(360deg);}   
	0%  {-moz-transform: rotate(0deg);}
    }
    @-webkit-keyframes grow {
	from { -webkit-transform:scale(1) }
	to { -webkit-transform:scale(1.5) }
    }
    @-moz-keyframes grow {
	from { -moz-transform:scale(1) }
	to { -moz-transform:scale(1.5) }
    }
    .agent, .agentbox {
	height: 120px;
	width: 130px;
    }
    .agent:hover {
	-webkit-animation: grow 1.7s infinite ease;
	-moz-animation: grow 1.7s infinite ease
    }
</style>
<body>
<div class='wrapper'>
<div class='container'>
	<div class='attach'>
		<div id='News' class='category'>NEWS</div>
		<div id='Media' class='category'>MEDIA</div>
		<div id='Social' class='category'>SOCIAL</div>
		<div id='Sport' class='category'>SPORT</div>
		<div id='Technology' class='category'>TECH</div>
		<div id='World' class='category'>WORLD</div>
		<div id='Youtube' class='category'>YT</div>
	</div>
		<div class='output'></div>
	<div class='ico'>
		<img id='fav' class='fav' src='favicon/favico.png'>
		<img id='inv' class='fav' src='favicon/invert.png'>
	</div>
		<div class='random'></div>
		<div class='opposite'></div>
</div>
</div>
<script>
var op = 0
var request
var ost = 0
var his = 0
var evt = false
var job = false
var sel = 'Social'

if (location.href.match('\\?op=1')){

        app(1)

}

else app(op)

pop(sel)
air(sel)
scr('#pop:last')
$('#'+sel).css({'border-bottom':'1px solid #ccc','color':'#aaa'})

$('.random').on('touchstart click', function(e) {

	ran(sel)

    e.preventDefault()

})

$('.opposite').on('touchstart click', function(e) {

	app('op')

    e.preventDefault()

})

$('.category').on('touchstart click', function(e){

	his = 0
	evt = true
	$('#pop, #air, .arm, .get').remove()
	air($(this).attr('id'))
	pop($(this).attr('id'))
	scr('#pop:last')
	setTimeout(function(){ evt = false }, 250)
    e.preventDefault()

})

$('.fav').on('touchstart click', function(e){

	evt = true
	air(sel)
	pop(sel)
	scr('#pop:last')
	setTimeout(function(){ evt = false }, 250)
    e.preventDefault()
    e.stopPropagation()

})

$('#inv').on('touchstart click mousemove mouseleave', function(e){

    if (e.type == 'touchstart' || e.type == 'click'){
	$('#inv').css({'-moz-box-shadow':'1px 1px 5px #888','box-shadow':'1px 1px 5px #eee'})
	setTimeout(function(){ $('#inv').css({'-moz-box-shadow':'1px 1px 5px #aaa','box-shadow':'1px 1px 5px #aaa'}) }, 50)
    }
    if (e.type == 'mousemove') $(this).css({'-moz-box-shadow':'1px 1px 5px #aaa','box-shadow':'1px 1px 5px #aaa'})
    else if (e.type == 'mouseleave') $(this).css({'-moz-box-shadow':'1px 1px 5px #ccc','box-shadow':'1px 1px 5px #ccc'})

})

$('.output').on('scroll touchmove focusout', function(e){

    if (e.type == 'scroll' || e.type == 'touchmove'){

	pin($(this).scrollTop())
	if ($(this).scrollTop() != 0 && $(this).scrollTop() != $('air').outerHeight()) job = false
	if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight - 20) if (job == false) pop(sel)

    }
    else if (e.type == 'focusout') setTimeout(function(){ $('.output').focus() }, 100)

}).attr('tabindex', -1).focus()


String.prototype.trunc =
     function(n, e){
         if (this.length <= n) return this
         var subString = this.substr(0, n-1)
         return ( e ? subString.substr(0, subString.lastIndexOf(' ')) : subString) + "&hellip;"
      }

function abr(n, e) {

	e = Math.pow(10,e);
	var a = [ "k", "m", "b", "t" ]

	for (var i=a.length-1; i>=0; i--) {
		var size = Math.pow(10,(i+1)*3)
		if(size <= n) {
			n = Math.round(n*e/size)/e
			if((n == 1000) && (i < a.length - 1)) {
				n = 1
				i++
			}
			n += a[i]
		}
	}

	return n

}

function scr(n){ $('.output').animate({ scrollTop: $(n+':last').offset().top - $('.output').offset().top + $('.output').scrollTop() }, 100) }

function pin(n){

	if (job == true){ $('.fav').css({'transition':'.3s','bottom':'-2em'}); $('.attach').css({'transition':'.3s','top':'-.1em'}) }
	if (n < ost - 5){ $('.fav').css({'transition':'.3s','bottom':'-2em'}); $('.attach').css({'transition':'.3s','top':'-.1em'}) }
	else if (n > ost + 5 && ost != 0 && job == false && evt == false){  $('.fav').css({'transition':'.3s','bottom':'-4.6em'}); $('.attach').css({'transition':'.3s','top':'-2.9em'}) }

    ost = n

}

function ran(n){

	var obj = []
	$.each(menu, function(i,k){ if (n == k.cat) obj.push(menu[i]) })
	var n = obj[Math.floor(Math.random()*obj.length)]
	get(menu.indexOf(n))

}

function rev(Object) {

	var newObject = {}
	var keys = []
	for (var key in Object) keys.push(key)
	for (var i = keys.length - 1; i >= 0; i--) {

		var value = Object[keys[i]]
		newObject[keys[i]] = value

	}

   return newObject

}

function utc(n){

	var opt = { weekday : 'long', day : '2-digit', month : 'short', hour : 'numeric', minute : 'numeric' , second : '2-digit', hour12 : true }
	var dmz = []
	dmz.push(ago(n))
	var utc = new Date(n)
	var gmt = utc.toLocaleString('en-US', opt)
	dmz.push(gmt)

    return dmz

}

function ago(n){

	var age = new Date()
	var dis = age.getTime() - new Date(n).getTime()
	var sec = dis/1000
	if (sec < 60) return parseInt(sec) + ' second' + (parseInt(sec) > 1 ? 's' : '') + ' ago'
	var min = sec/60; if (min < 60) return parseInt(min) + ' minute' + (parseInt(min) > 1 ? 's' : '') + ' ago'
	var h = min/60; if (h < 24) return parseInt(h) + ' hour' + (parseInt(h) > 1 ? 's' : '') + ' ago'
	var d = h/24; if (d < 30) return parseInt(d) + ' day' + (parseInt(d) > 1 ? 's' : '') + ' ago'
	var m = d/30; if (m < 12) return parseInt(m) + ' month' + (parseInt(m) > 1 ? 's' : '') + ' ago'
	var y = m/121

    return parseInt(y) + ' year' + (parseInt(y) > 1 ? 's' : '') + ' ago'

}

function app(n){

	if (n == 'op'){ op = op != true } else if (n == 1 || n == 0) op = n

	if (op == 1){
		$('html, .container, .output, .pop, .air, .pub, .box').css({'background-color':'#000','color':'rgba(255,255,255,.8)'})
		$('.category, .ago').css({'border-bottom':'none','color':'rgba(255,255,255,.8'})
		$('.random, .opposite, #'+sel).css('border-bottom','1px solid rgba(255,255,255,.8)')
		$('hr').css('visibility','hidden'); $('#inv').hide(); $('#fav').show()
		$('.attach').css('background-color','rgba(0, 0, 0, .7)')
		$('.output').removeClass('invert').addClass('default')
		$('.gif, .agent').attr('src','favicon/favico.png')
		$('.img').css('filter','brightness(75%)')
	}

	else if (op == 0){
		$('.container, .output, .pop, .air, .pub').css({'background-color': '#fff','color':'rgba(0,0,0,.7)'})
		$('hr').css('visibility','visible'); $('#fav').hide(); $('#inv').show()
		$('.category, .ago').css({'border-bottom':'none','color':'rgba(0,0,0,.7'})
		$('.random, .opposite, #'+sel).css('border-bottom','1px solid rgba(0,0,0,.3)')
		$('.attach').css('background-color','rgba(255, 255, 255, .9)')
		$('.output').removeClass('default').addClass('invert')
		$('.gif, .agent').attr('src','favicon/invert.png')
		$('html').css('background-color','#FAFAFA')
		$('.img').css('filter','brightness(100%)')
		$('.box').css({'background-color':'#fafafa','color':'rgba(0,0,0,.7)'})
	}

}

function air(n){

	rev(menu.reverse())
	$('.output').prepend("<div id='air'></div>")
	for (var i = menu.reverse().length - 1; i >= 0; i--){ if (n == menu[i].cat) $('#air').prepend("<br><hr><div class='air' onclick='get(" + i + ")'><br>" + menu[i].des + "</div>") }
	$('.output').scrollTop($('.output').scrollTop() + $('#air:first').outerHeight())
	app()

}

function pop(n){

	if (job == true && $('#pop, #air').length == 0){ request.abort(); job = false }
	if ($('#pop, #air').length > 2){ $('#pop, #air:last, .get').remove() }
	document.title = n + ' ack'
	if (n != sel) his = 0
	sel = n
	$('.output').append("<div id='pop'></div>")
	for (var i = his; i < menu.length; i++) if (n == menu[i].cat) $('#pop').append("<br><hr><div class='pop' onclick='get(" + i + ")'><br>" + menu[i].des + "</div>")
	his = 0
	app()

}


function res(i, n) {

	var e = new Image()
	e.onload = function() {

		if (e.width > 320) $('#'+i).width('100%')
		$('#'+i).css('display','block')

	}

    e.src = n

}

function get(n){
	if (job == true && $('#pop, #air').length == 0){ request.abort(); job = false }
	his = n
	job = true
	var pub = []
	$('#pop, #air, .arm, .get').remove()
	if (sel == 'Youtube'){ var quit = 6 } else { var quit = 10 }
	$('.output').append("<div class='arm'></div><div class='get'></div>")
	if ($('.output').hasClass('invert')){ gif = 'invert.png' } else { gif = 'favico.png' }
	$('.arm').html("<br><div style='display:inline-block'><img class='gif' src='favicon/" + gif + "'></div>")
	request = $.get('https://acktic-github-io.herokuapp.com/' + menu[n].uri)
		.fail(function(){ $('.arm').remove(); $('.get').append("<hr><br><div class='pop' onclick='window.open(\""+menu[n].ext+"\")' style='margin-bottom:2em'>"+menu[n].des+"</div><br>"); job = false })
		.done(function(data){
			$('.arm').remove()
			$('.get').append("<hr><br><div class='pop' onclick='window.open(\""+menu[n].ext+"\")' style='margin-bottom:2em'>"+menu[n].des+"</div><br>")
			if ($(data).find('entry').length > 0)				     var chn = "entry"
			else 								     var chn = 'item'
				$(data).find(chn).each(function(i){
					if (chn == 'entry'){
											     var ref = $(this).find('link').attr('href')
											     var dst = utc($(this).find('updated').text()); var gen = new Date($(this).find('updated').text()).getTime()
					}
					else if (chn = 'item'){
											     var ref = $(this).find('link').text()
					     if ($(this).find('pubDate').text().length > 0){ var dst = utc($(this).find('pubDate').text()); var gen = new Date($(this).find('pubDate').text()).getTime() }
										      else { var dst = utc($(this).find('dc\\:date, date').text()); var gen = new Date($(this).find('dc\\:date').text()).getTime() }
					}
					     if (src = $(this).find('content').text().match(/https:\/\/i\.redd\.it\/.+?(png|jpg)/g)) src = String(src)
					else if (src = $(this).find('content').text().match(/https:\/\/.\.thumbs\.redditmedia\.com\/.+?(png|jpg)/g)) src = String(src)
					else if (src = $(this).find('image').find('link, url').text().match(/https:\/\/.+?(png|jpg)/)) src = String(src[0])
					else if (src = $(this).find('link').attr('href')) if (src.match(/youtube/)) src = 'https://www.youtube.com/embed/' + String(src.split('=')[1])
					    						  else src = String(src)
					else if (src = $(this).find('media\\:thumbnail, thumbnail').attr('url')) src = src
					else if (src = $(this).find('media\\:content, content, enclosure').attr('url')) src = String(src.match(/(https:\/\/.+)/)[1].split(','))
					else if (src = $(this).find('content\\:encoded:first').text().match(/src=['"](.*?)['"]/)) src = String(src[1])
					else if (src = $(this).find('content\\:encoded').text().match(/src=['"](.*?)['"]/)) src = String(src[1])
					else if (src = $(this).find('description').text().toLowerCase().match(/src=['"](.*?)['"]/)) src = String(src[1])
					else if (menu[n].des.match(/ESPN/)) src = $(this).find('image').text()

					if (!src || src.match(/comments|twitter|undefined/) || !src.match(/https|embed|\.gif|\.jpg|\.jpeg|media|\.png/)) src = 'favicon/' + gif

					if (src.match(/youtube/)) img = "<div class='ago'><b>Views</b> " + abr($(this).find('media\\:statistics, statistics').attr('views'), 2) + "</div><div class='yt'><iframe src='" + src + "'></iframe></div>"

					else if (src.match(/favicon/)) img = "<div class='ago'>" + dst[0] + "&ensp;" + dst[1] + "<div class='agentbox'><img id='" + i + "' style='display:none' src='" + src + "' class='img'></div></div>"

					else img = "<div class='box'><div class='ago'>" + dst[0] + "</div><img id='" + i + "' style='display:none' src='" + src + "' class='img'><div class='ago'>" + dst[1] + "</div></div></div>"

					var ext = "<div id='pub' onclick='window.open(\"" + ref.trim() + "\")'><div class='pub'>" + $(this).find('title:first').text().trim().trunc(90, true) + "</div>" + img + "</div>"
					var top = { e: i, top : gen, pub : ext }
					pub.push(top)
				})
				pub.sort(function(a, b){ return b.top - a.top })
				for (var k = 0; k <= quit - 1; k++){ $('.get').append(pub[k].pub); if ($('#'+pub[k].e).length) res(pub[k].e, $('#'+pub[k].e).attr('src')) }
			air(sel)
		})
}
</script>
</body>
</html>
