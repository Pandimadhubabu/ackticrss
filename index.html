<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="https://acktic.github.io/rss.js"></script>
  </head>
<body>
<style>
	::-webkit-scrollbar { display: none; }
	div {
		font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
		font-size: 13px;
		cursor: default;
	}
	.con {
		position: absolute;
		height: 100%;
		width: 100%;
		left: -.3em;
		top: 0em;
	}
	.cat {
		display: inline-block;
		padding-top: 1.5em;
		padding-bottom: 2em;
		text-align: center;
		font-size: 12px;
		width: 16.3%;
	}
	.out {
		background-image: url(https://acktic.github.io/favicon.png);
		background-repeat: no-repeat;
		background-position: center;
		outline: none !important;
		position: absolute;
		overflow: auto;
		bottom: 3em;
		width: 100%;
		left: 4px;
		top: 3em;
	}
	.xml {
		padding-bottom: 4em;
		padding-left: 1em;
		padding-right: 1em;;
		padding-top: 3em;
		line-height: 2em;
	}
</style>
    <div class="con">
	<div class="tag" style="justify-content: center; display: flex">
		<div id="Local" class="cat" onclick="pop('Local')">Local</div>
		<div id="Entertainment" class="cat" onclick="pop('Entertainment')">Ent</div>
		<div id="Social" class="cat" onclick="pop('Social')">Social</div>
		<div id="Sports" class="cat" onclick="pop('Sports')">Sports</div>
		<div id="Technology" class="cat" onclick="pop('Technology')">Tech</div>
		<div id="World" class="cat" onclick="pop('World')">World</div></div>
		<img src="https://acktic.github.io/favicon.png" style="position:absolute;bottom:-.5em;padding-top:2em;padding:1em;transform:translateX(50%);right:48%;height:24px;width:24px" onclick="ran(sel)">
	<div class="out"><div>
    </div>
<script>
var obj = [];
var rss = false;
var dark = false;
var sel = "Entertainment";
	$(document).one("ready", function() {
		pop(sel)
		if ( location.href.match('\\?dark=1') ) dark = true
		if ( location.href.match('\\&cat=Local') ) pop("Local")
 		if ( location.href.match('\\&cat=Entertainment') ) pop("Entertainment")
		if ( location.href.match('\\&cat=Social') ) pop("Social")
		if ( location.href.match('\\&cat=Sports') ) pop("Sports")
		if ( location.href.match('\\&cat=Technology') ) pop("Technology")
		if ( location.href.match('\\&cat=World') ) pop("World")
		$(".out").attr('tabindex', -1).focus();
		$(".out").focusout(function(){ $(".out").attr('tabindex', -1).focus() })
		app()
   		$('.out').bind('scroll', function(){
			if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight ) {
				if (rss == false) pop(sel)
				else rss = true
			}
		});
	});
	function url(n) { window.open(n); };
	function scr(n) { $(".out").animate({ scrollTop: $(n + ":last").offset().top - $(".out").offset().top + $(".out").scrollTop() }, 1000) }
	function pop(n) {
		$(document).attr("title", n + " - acktic")
		sel = n
		$(".pop, .xml, .bar").remove()
		$('.out').append("<div class='bar' style='padding-top:" + $(".out").height() / 100 * 7 + "em' onclick='app(\"toggle\")'></div><div class='pop'>")
		scr(".pop")
		$.each(menu, function(i, k) { if (n == k.category) $(".out").append("<div id='" + k.name + "' class='xml' onclick='xhr($(this).attr(\"id\"))'><b>&ensp;&ensp;" + k.category + "</b>&ensp;" + k.title + "</div>") })
		$('.out').append("<div class='bar' style='padding-bottom:" + $(".out").height() / 100 * 7 + "em' onclick='app(\"toggle\")'></div></div>")
		app()
	}
	function xhr(n) { $.each(menu, function(i, k) { if (n == k.name) get(k.category, k.feed, k.title, k.homepage); }) }
	function ran(n) {
		$.each(menu, function(i, k) { if (n == k.category) obj.push(menu[i]) })
		var n = obj[Math.floor(Math.random()*obj.length)]
		get(n.category, n.feed, n.title, n.homepage)
	}
	function app(n) {
		if (n == "toggle") dark = dark != true
		if (dark == false) $("body, .con, .cat, .xml").css({"background-color":"white","color":"#000000"})
		else if (dark == true) $("body, .con, .cat, .xml").attr("style", "background-color:#000000;color:#FFFFFF")
	}
	function get(category, feed, title, homepage) {
		rss = true
		$(".pop, .bar").remove()
		$(".out").append("<div class='get'><div class='xml'>&ensp;&ensp;It's on the way!&ensp;&ensp;Please be patient.</div></div>")
		scr(".get")
		$.get("https://salty-refuge-64158.herokuapp.com/" + feed)
		.fail(function () { $(".out").append("<div class='get'><div class='xml'><div class='xml'>&ensp;&ensp;Oops! Something went wrong!</div></div>"); })
		.success(function (data) {
			var entry = $(data).find("entry")
			if (entry.length > 0) var format = "entry"
			else var format = "item"
			$(".out").append("<div class='get' style='padding-bottom:" + $(".out").height() / 100 * 7 + "em' onclick='app(\"toggle\")'><div class='xml' onclick='url(\"" + homepage + "\")'><i class='fa fa-external-link'></i>&ensp;&ensp;<b>" + category + "</b>&ensp;" + title + "</div>")
			$(data).find(format).each(function (i, k) {
				if (format == "entry") var link = $(this).find("link").attr("href")
				else var link = $(this).find("link").text()
				$(".out").append("<div class='xml' onclick='url(\"" + link + "\")'>&ensp;&ensp;" + $(this).find("title").text() + "</div>");
				if(i >= 24) return false
			});
			rss = false
			$(".out").append("<div class='xml' onclick='url(\"" + homepage + "\")'><i class='fa fa-external-link'></i>&ensp;&ensp;<b>" + category + "</b>&ensp;" + title + "</div>")
			app()
			scr(".get")
		})
	}
</script>
</body>
</html>
