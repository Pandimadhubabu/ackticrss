<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <link rel="icon" type="image/png" href="https://ackti.files.wordpress.com/2019/11/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="https://acktic.github.io/rss.js"></script>
  </head>
<style>
@media only screen and (min-width: 960px) {
    body {
	transform: translate(50%,50%);
    	position: fixed;
	border: none;
	bottom: 50%;
	height: 90%;
	width: 85%;
	right: 50%;
    }
    a:hover {
	text-decoration: underline;
	color: #888;
    }
}
    ::-webkit-scrollbar { display: none }
    div {
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	font-family: 'Roboto', sans-serif;;
	font-size: 12px;
	cursor: default;
    }
    .con {
	position: absolute;
	height: 100%;
	width: 100%;
	left: 1px;
	top: 0em;
    }
    .tag {
	background-color: #EAEAEA;
	justify-content: center;
	position:relative;
	display: flex;
	height: 4em
    }
    .cat {
	background-color: inherit;
	display: inline-block;
	padding-bottom: 2em;
	text-align: center;
	font-size: 12px;
	width: 16.3%;
	padding-top: 1.4em;
    }
    .out {
	webkit-overflow-scrolling: touch;
	outline: none !important;
	overflow: auto;
	height: 88%;	
	width: 100%;
    }
    .xml {
	background-color: inherit;
	padding-bottom: 2.2em;
	padding-right: 1em;
	padding-left: 1em;
	padding-top: 1em;
	line-height: 2em;
    }
    .inv, .fav {
	transform: translateX(50%);
	position: absolute;
	bottom: 0em;
	height: 32px;
	width: 32px;
	right: 50%;
    }
</style>
<body>
    <div class="con">
	<div class="tag">
	<div id="News" class="cat" onclick="pop('News')">News</div>
	<div id="Media" class="cat" onclick="pop('Media')">Media</div>
	<div id="Social" class="cat" onclick="pop('Social')">Social</div>
	<div id="Sport" class="cat" onclick="pop('Sport')">Sport</div>
	<div id="Technology" class="cat" onclick="pop('Technology')">Tech</div>
	<div id="World" class="cat" onclick="pop('World')">World</div>
	</div>
	<img class="inv" src="https://ackti.files.wordpress.com/2019/11/invert.png">
	<img class="fav" src="https://ackti.files.wordpress.com/2019/11/favicon.png">
	<div class="out"><div>
    </div>
<script>
var opp = false
var tap = false
var rss = false
var sel = 'Social'
    if (location.href.match("\\?opp=0")) app(false)
    if (location.href.match("\\?opp=1")) app(true)
    if (location.href.match("\\&category=News") ||
	location.href.match("\\&category=Media") ||
	location.href.match("\\&category=Social") ||
	location.href.match("\\&category=Sport") ||
	location.href.match("\\&category=Technology") ||
	location.href.match("\\&category=World")) pop(location.search.split("&category=")[1])
    else {
	pop(sel)
	app(opp)
    }
$('.cat').hover(function(){ $(this).css('color','#AAA')}).mouseout(function(){ $(this).css('color','inherit') })
$('.out').attr('tabindex',-1).focus();
$('.out').focusout(function(){$('.out').attr('tabindex',-1).focus()})
$('.out').on('scroll',function(){
	if ($(this).scrollTop()+$(this).innerHeight() >= $(this)[0].scrollHeight) if (rss == false) pop(sel)
})
$('.inv, .fav').on('touchstart click', function(e){
	if (!tap){
		tap=setTimeout(function(){
			tap = null
			pop(sel)
		},300)
	}
  	else {
		clearTimeout(tap);
			tap=null
			app('opp')
	}
    e.preventDefault()
})
function url(n){ window.open(n) }
function xhr(n){ get(menu[n].ver, menu[n].des, menu[n].api, menu[n].ext) }
function scr(n){ $('.out').animate({ scrollTop:$(n+':last').offset().top - $('.out').offset().top + $('.out').scrollTop()},300) }
function pop(n){
	sel = n
	$('.pop, .bar').remove()
	$(document).attr('title',n+' - ack')
	$('.out').append("<div class='bar' style='padding-top:" + $('.out').height()/100*.2+"em'></div>" +
			 "<div class='pop' style='padding-top:.5em'></div>")
	$.each(menu, function(i, k){
		if (n == k.ver) $('.pop').append("<div class='xml' onclick='xhr("+i+")'><b>"+k.ver+"</b>&ensp;<a>"+k.des+"</a></div>")
	})
	$('.out').append("<div class='bar' style='padding-bottom:"+$(".out").height()/100*3.5+"em'></div>")
	scr('.pop')
}
function app(n){
	if (n == 'opp') opp = opp != true
	else if (n == true || n == false) opp = n
	if (opp == true){
		$('body, .con, .out, .tag').css({'background-color':'#000','color':'#EFEFEF'})
		$('.con, .tag').css('box-shadow','0px 0px 0px #000')
		$('.inv').css('display','none')
		$('.fav').css('display','block')
	}
	else if (opp == false){
		$('body').css('background-color','#FFF')
		$('.con, .out, .tag').css({'background-color':'#FAFAFA','color':'#373737'})
		$('.con, .tag').css('box-shadow','1px 1px 3px #888')
		$('.fav').css('display','none')
		$('.inv').css('display','block')
	}
}
function get(ver, des, api, ext){
	rss = true
	$('.bar').remove();
	$('.out').append("<div class='bar'>&ensp;&ensp;It's on the way! Please be patient.</div><div class='get'>")
	scr('.get:last')
	$.get('https://salty-refuge-64158.herokuapp.com/'+api)
		.fail(function(){ $('.out').append("<div class='get'><div class='xml'> &ensp;Oops! Something went wrong!</div>")} )
		.success(function(req){
			$('.bar').remove();
			$('.out').append("<div class='xml' onclick='url(\""+ext+"\")'><a><b>"+ver+"</b>&ensp;"+des+"</a></div></div>")
			if ($(req).find('entry').length > 0) var set = "entry"
			else 				     var set = 'item'
				$(req).find(set).each(function(i, k){
					if (i >= 24) return false
					if (set == 'entry')  var ref = $(this).find('link').attr('href')
					else 		     var ref = $(this).find('link').text()
		$('.out').append("<div class='xml' onclick='url(\""+ref+"\")'>&ensp;<a>"+$(this).find("title").text()+"</a></div>")
		})
		$('.out').append("<div class='xml' onclick='url(\""+ext+"\")'><a><b>"+ver+"</b>&ensp;"+des+"</a><br><br><hr></div>" +
				 "<div class='bar' style='padding-bottom:"+$(".out").height()/100*3.5+"em'></div>")
		scr('.get:last')
		rss = false
		})
}
</script>
</body>
</html>
