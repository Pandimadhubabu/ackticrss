<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <link rel="icon" type="image/png" href="https://ackti.files.wordpress.com/2019/11/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="https://acktic.github.io/rss.js"></script>
  </head>
<style>
@media only screen and (min-width: 960px) {
    body {
	transform: translate(50%,50%);
    	position: fixed;
	border: none;
	bottom: 50%;
	height: 90%;
	width: 70%;
	right: 50%;
    }
}
    ::-webkit-scrollbar { display: none }
    .con {
	postion:absolute;
	height:99%;
	width:96%;
	top:-.5em;
    }
    div {
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	font-family: 'Roboto', sans-serif;;
	font-size: 12px;
	cursor: default;
    }
    .con {
	position: absolute;
	height: 99%;
	width: 96%;
	top: -.5em;
    }
    .tag {
	justify-content: center;
	display: flex;
	height: 4.5em
    }
    .cat {
	background-color: inherit;
	display: inline-block;
	padding-bottom: 2em;
	text-align: center;
	padding-top: 1.8em;
	font-size: 14px;
	width: 16.3%;
    }
    .out {
	webkit-overflow-scrolling: touch;
	outline: none !important;
	position: absolute;
	overflow: auto;
	height: 89.7%;
	left: .3em;
    }
    .xml {
	background-color: inherit;
	padding-bottom: 2.2em;
	line-height: 1.5em;
	padding-top: 2em;
    }
    .inv, .fav {
	transform: translateX(50%);
	position: absolute;
	bottom: -.7em;
	height: 32px;
	width: 32px;
	right: 50%;
    }
</style>
<body>
    <div class="con">
	<div class="tag">
	<div id="News" class="cat" onclick="pop('News')">News</div>
	<div id="Media" class="cat" onclick="pop('Media')">Media</div>
	<div id="Social" class="cat" onclick="pop('Social')">Social</div>
	<div id="Sport" class="cat" onclick="pop('Sport')">Sport</div>
	<div id="Technology" class="cat" onclick="pop('Technology')">Tech</div>
	<div id="World" class="cat" onclick="pop('World')">World</div>
	</div>
	<img class="inv" src="https://ackti.files.wordpress.com/2019/11/invert.png">
	<img class="fav" src="https://ackti.files.wordpress.com/2019/11/favicon.png">
	<div class="out"><div>
    </div>
<script>
var bar = 2.5
var one = false
var opp = false
var tap = false
var rss = false
var sel = 'Social'
    $(document).one('ready', function() {
	$(".out").css("top", $(".tag").height()+"px");
	if (location.href.match("\\?dark=0")) app(false)
	if (location.href.match("\\?dark=1")) app(true)
	if (location.href.match("\\&cat=News") ||
	    location.href.match("\\&cat=Media") ||
	    location.href.match("\\&cat=Social") ||
	    location.href.match("\\&cat=Sport") ||
	    location.href.match("\\&cat=Technology") ||
	    location.href.match("\\&cat=World")) pop(location.search.split("&cat=")[1])
	else { pop(sel); app() }
	$(".out").attr('tabindex',-1).focus();
	$(".out").focusout(function(){$('.out').attr('tabindex',-1).focus()})
	$('.out').on('scroll',function(){
		if ($(this).scrollTop()+$(this).innerHeight() >= $(this)[0].scrollHeight){
			if (rss == false) pop(sel)
		}
		 if ($(this).scrollTop()<1) scr('.pop')})
	$('.inv,.fav').on('touchstart click', function(e){
		if (!tap){
			tap=setTimeout(function(){
				tap = null;
				pop(sel)
			},300)}
  		else {
			clearTimeout(tap);
			tap=null;
			ran(sel)
		}
	    e.preventDefault()
	})
    });
function url(n){ window.open(n) }
function scr(n){ $('.out').animate({ scrollTop:$(n+':last').offset().top - $('.out').offset().top + $('.out').scrollTop()},300) }
function xhr(n){ if (one == false){ get(menu[n].ver, menu[n].des, menu[n].api, menu[n].ext); one = true } }
function ran(n){
	var obj = []
	$.each(menu, function(i, k){ if(n == k.ver) obj.push(menu[i]) })
	var n = obj[Math.floor(Math.random()*obj.length)]
	get(n.ver, n.des, n.api, n.ext)
}
function app(n){
	if (n == true || n == false) opp = n
	if ( n == "opp") opp = opp != true
	if (opp == false){ $('body').css({'background-color':'transparent','color':'#000'}); $('.fav').css('display','none'); $('.inv').css('display','block') }
	else if (opp == true){ $('body').css({'background-color':'#000','color':'#FFF'}); $('.inv').css('display','none'); $('.fav').css('display','block') }
}
function pop(n){
	sel = n
	one = false
	$(document).attr('title',n+' - ack')
	$('.pop, .bar').remove()
	$('.out').append("<div class='bar' style='position:relative;padding-top:"+$(".out").height()/100*bar+"em' onclick='app(\"opp\")'></div><div class='pop'></div>")
	scr('.pop')
	$.each(menu, function(i, k){ if(n == k.ver) $('.pop').append("<div class='xml' onclick='xhr(" + i + ")'><b>"+k.ver+"</b> "+k.des+"</div>") })
	$('.out').append("<div class='bar' style='position:relative;padding-bottom:"+$(".out").height()/100*bar+"em' onclick='app(\"opp\")'></div>")
}
function get(ver, des, api, ext){
	rss = true
	$('.bar:last').remove()
	$('.out').append("<div class='get'><div class='xml'>It's on the way! &ensp;Please be patient.</div></div>")
	scr('.get')
	$.get('https://salty-refuge-64158.herokuapp.com/'+api)
	.fail( function(){ $('.out').append("<div class='get'><div class='xml'><div class='xml'>&ensp;&ensp;Oops! Something went wrong!</div>")} )
	.success(function(data){
		var entry = $(data).find('entry')
		if (entry.length > 0) var format="entry"
		else var format = 'item'
		$('.out').append("<div class='get'><div class='xml' onclick='url(\""+ext+"\")'><b>"+ver+"</b>&ensp;"+des+"</div>")
		$(data).find(format).each( function(i,k){
			if (format=='entry') {
				var ref = $(this).find('link').attr('href')
			}
			else {
				var ref = $(this).find('link').text();
			}
			$('.out').append("<div class='xml' onclick='url(\""+ref+"\")'>&ensp;"+$(this).find("title").text()+"</div>");
			if (i >= 24) return false
		})
		$('.out').append("<div class='xml' onclick='url(\""+ext+"\")'><b>"+ver+"</b>&ensp;"+des+"</div><div class='bar' onclick='app(\"opp\")' style='position:relative;padding-bottom:"+$(".out").height()/100*bar+"em'></div>")
		rss = false
		scr('.get')
	})
}
</script>
</body>
</html>
